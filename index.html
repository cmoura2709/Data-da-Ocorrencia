<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data da Ocorrência</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

  <div class="bg-white shadow-lg rounded-2xl p-8 w-full max-w-lg">
    <h1 class="text-3xl font-bold text-gray-800 text-center">Data da Ocorrência</h1>
    <p class="text-lg text-gray-500 mb-6 text-center">(Recusa de Informações)</p>

    <div class="mb-4">
      <label class="block text-gray-700 font-medium">Data da Notificação:</label>
      <input type="date" id="dataNotificacao" class="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none">
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 font-medium">Prazo (em dias):</label>
      <input type="number" id="prazo" class="mt-1 w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:outline-none">
    </div>

    <button onclick="calcularDatas()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 rounded-lg transition-colors">Calcular</button>

    <div id="resultado" class="mt-6 text-gray-700 space-y-1"></div>
  </div>

  <script>
    const feriados = ["2025-06-19", "2025-06-20"];

    function isDiaUtil(date) {
      const diaSemana = date.getDay();
      const feriado = feriados.includes(date.toISOString().split("T")[0]);
      return diaSemana !== 0 && diaSemana !== 6 && !feriado;
    }

    function proximoDiaUtil(date) {
      const novaData = new Date(date);
      while (!isDiaUtil(novaData)) {
        novaData.setDate(novaData.getDate() + 1);
      }
      return novaData;
    }

    function calcularDatas() {
      const dataNotificacao = document.getElementById("dataNotificacao").value;
      const prazo = parseInt(document.getElementById("prazo").value);

      if (!dataNotificacao || isNaN(prazo)) {
        alert("Preencha todos os campos!");
        return;
      }

      let inicioContagem = new Date(dataNotificacao);
      inicioContagem.setDate(inicioContagem.getDate() + 1);
      inicioContagem = proximoDiaUtil(inicioContagem);

      let dataFinal = new Date(inicioContagem);
      let diasContados = 0;
      while (diasContados < prazo) {
        dataFinal.setDate(dataFinal.getDate() + 1);
        if (isDiaUtil(dataFinal)) {
          diasContados++;
        }
      }

      let dataOcorrencia = new Date(dataFinal);
      dataOcorrencia.setDate(dataOcorrencia.getDate() + 1);
      dataOcorrencia = proximoDiaUtil(dataOcorrencia);

      document.getElementById("resultado").innerHTML = `
        <p><strong>Data de Início da Contagem:</strong> ${inicioContagem.toLocaleDateString("pt-BR")}</p>
        <p><strong>Data Final para Apresentação da Resposta:</strong> ${dataFinal.toLocaleDateString("pt-BR")}</p>
        <p><strong>Data da Ocorrência:</strong> ${dataOcorrencia.toLocaleDateString("pt-BR")}</p>
      `;
    }
  </script>

</body>
</html>
